<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ranking Venón</title>
    <style>
        body { background: #070707; color: white; font-family: sans-serif; display: flex; justify-content: center; padding-top: 50px; }
        .card { background: #111; border: 1px solid #b30000; padding: 20px; border-radius: 8px; width: 300px; }
        h2 { color: #d4af37; text-align: center; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #222; }
        .elo { color: #00ffcc; font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <h2>VENÓN CLAN</h2>
    <div id="lista">Cargando guerreros...</div>
</div>

<script>
    const jugadores = [
        { name: "Hera", id: "199325" },
        { name: "TheViper", id: "196240" },
        { name: "Envys", id: "401359" },
        { name: "Sinister", id: "2598146" }
    ];

    async function obtenerRanking() {
        const contenedor = document.getElementById('lista');
        contenedor.innerHTML = ""; // Limpiar el "Cargando"

        for (let p of jugadores) {
            // Creamos el espacio en la tabla
            const div = document.createElement('div');
            div.className = 'row';
            div.innerHTML = `<span>${p.name}</span><span id="p-${p.id}" class="elo">...</span>`;
            contenedor.appendChild(div);

            try {
                // Probamos con la API directa de AoE2.net (a veces el mirror sigue vivo para datos rápidos)
                const res = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent('https://aoe2.net/api/player/ratinghistory?game=age2&leaderboard_id=3&profile_id=' + p.id + '&count=1')}`);
                const data = await res.json();
                const stats = JSON.parse(data.contents);

                if (stats && stats.length > 0) {
                    document.getElementById(`p-${p.id}`).innerText = stats[0].rating;
                } else {
                    document.getElementById(`p-${p.id}`).innerText = "Inactivo";
                }
            } catch (e) {
                document.getElementById(`p-${p.id}`).innerText = "N/A";
            }
        }
    }

    obtenerRanking();
</script>
</body>
</html>
